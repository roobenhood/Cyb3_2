/* AlwaniCTF - Responsive Design for Mobile */
/* تصميم متجاوب شامل للهواتف */

/* ========== MOBILE FIRST APPROACH ========== */

/* تأكد من عرض viewport الصحيح */
html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    overflow-x: hidden;
}

body {
    overflow-x: hidden;
    width: 100%;
    min-width: 320px;
}

/* ========== CONTAINER RESPONSIVE ========== */
.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* ========== NAVBAR MOBILE ========== */
@media (max-width: 992px) {
    .navbar .container {
        padding: 0 15px;
    }
    
    .nav-links {
        display: none !important;
    }
    
    .mobile-menu-btn {
        display: flex !important;
        align-items: center;
        justify-content: center;
        background: none;
        border: none;
        color: var(--neon-green);
        font-size: 1.5rem;
        cursor: pointer;
        padding: 8px;
        z-index: 1001;
    }
    
    .nav-controls {
        margin-right: 10px;
    }
    
    [dir="ltr"] .nav-controls {
        margin-left: 10px;
        margin-right: 0;
    }
}

@media (max-width: 768px) {
    .navbar {
        padding: 10px 0;
    }
    
    .logo {
        font-size: 1.1rem;
    }
    
    .logo-icon {
        font-size: 1.3rem;
    }
    
    .theme-toggle {
        width: 36px;
        height: 36px;
        font-size: 1rem;
    }
    
    .lang-toggle {
        padding: 6px 10px;
        font-size: 1rem;
    }
}

/* ========== MOBILE MENU ========== */
.mobile-menu {
    display: none;
    position: fixed;
    top: 56px;
    left: 0;
    right: 0;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    padding: 15px;
    flex-direction: column;
    gap: 5px;
    z-index: 999;
    max-height: calc(100vh - 56px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.mobile-menu.active {
    display: flex;
}

.mobile-menu a {
    display: block;
    color: var(--text-primary);
    text-decoration: none;
    padding: 14px 16px;
    border-radius: var(--border-radius-md);
    transition: background var(--transition-fast);
    font-size: 1rem;
}

.mobile-menu a:hover,
.mobile-menu a:active {
    background: rgba(0, 255, 136, 0.1);
}

.mobile-menu a.active {
    background: rgba(0, 255, 136, 0.15);
    color: var(--neon-green);
}

/* ========== HERO SECTION MOBILE ========== */
@media (max-width: 768px) {
    .hero {
        padding: 40px 0;
    }
    
    .hero-enhanced {
        padding: 60px 0;
    }
    
    .hero-title {
        font-size: 2rem;
        line-height: 1.2;
    }
    
    .hero-title-enhanced {
        font-size: 2rem;
        line-height: 1.2;
        opacity: 1;
    }
    
    .hero-subtitle {
        font-size: 1.1rem;
        min-height: auto;
    }
    
    .hero-description,
    .hero-description-enhanced {
        font-size: 1rem;
        padding: 0 10px;
        opacity: 1;
    }
    
    .hero-buttons,
    .hero-buttons-enhanced {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
        padding: 0 20px;
        opacity: 1;
    }
    
    .hero-buttons .btn,
    .hero-buttons-enhanced .btn {
        width: 100%;
        justify-content: center;
    }
    
    .hero-stats,
    .hero-stats-enhanced {
        flex-direction: column;
        gap: 20px;
        margin-top: 40px;
        opacity: 1;
    }
    
    .stat-item,
    .stat-item-enhanced {
        padding: 15px;
        background: rgba(0, 255, 136, 0.05);
        border-radius: var(--border-radius-md);
    }
    
    .stat-value,
    .stat-value-enhanced {
        font-size: 1.8rem;
    }
    
    .stat-item-enhanced::after {
        display: none;
    }
}

@media (max-width: 480px) {
    .hero-title,
    .hero-title-enhanced {
        font-size: 1.6rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
}

/* ========== PAGE HEADER MOBILE ========== */
@media (max-width: 768px) {
    .page-header {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
        padding: 15px 0 20px;
        gap: 15px;
    }
    
    .page-title {
        font-size: 1.6rem;
    }
    
    .page-description {
        font-size: 1rem;
    }
    
    .page-header .btn {
        width: 100%;
        justify-content: center;
    }
}

/* ========== CARDS MOBILE ========== */
@media (max-width: 768px) {
    .card {
        padding: 18px;
        margin-bottom: 15px;
    }
    
    .card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .card-title {
        font-size: 1.1rem;
    }
    
    .card-points {
        font-size: 1.2rem;
    }
    
    .card-badges {
        margin-bottom: 10px;
    }
    
    .card-footer {
        flex-direction: column;
        gap: 12px;
        padding-top: 12px;
    }
    
    .card-footer .btn {
        width: 100%;
        justify-content: center;
    }
}

/* ========== CHALLENGES GRID MOBILE ========== */
@media (max-width: 768px) {
    .challenges-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .challenge-card {
        margin-bottom: 0;
    }
    
    .challenge-card-enhanced {
        padding: 18px;
    }
    
    .challenge-card-enhanced .card-points {
        position: static;
        margin-bottom: 10px;
        text-align: right;
    }
    
    .challenge-card-enhanced:hover {
        transform: none;
    }
}

/* ========== FILTERS MOBILE ========== */
@media (max-width: 768px) {
    .filters-section {
        margin-bottom: 20px;
    }
    
    .search-input {
        max-width: 100%;
    }
    
    .filters {
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 10px;
        gap: 8px;
    }
    
    .filter-btn {
        flex-shrink: 0;
        padding: 8px 14px;
        font-size: 0.85rem;
    }
    
    .filter-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        flex-wrap: nowrap;
        padding-bottom: 10px;
    }
}

/* ========== SCOREBOARD MOBILE ========== */
@media (max-width: 768px) {
    .scoreboard-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        flex-wrap: nowrap;
        padding-bottom: 10px;
    }
    
    .scoreboard-tabs .btn {
        flex-shrink: 0;
    }
    
    .scoreboard-header,
    .scoreboard-row {
        grid-template-columns: 50px 1fr 80px;
        padding: 12px 15px;
        font-size: 0.85rem;
    }
    
    /* Mobile: show Rank + Player/Team + Score only */
    .scoreboard-header > :nth-child(3),
    .scoreboard-row > :nth-child(3),
    .scoreboard-header > :nth-child(4),
    .scoreboard-row > :nth-child(4) {
        display: none;
    }
    
    .player-avatar,
    .scoreboard-avatar {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
    }
    
    .player-name,
    .scoreboard-name {
        font-size: 0.9rem;
    }
    
    .player-team,
    .scoreboard-team {
        font-size: 0.75rem;
    }
    
    .score-value,
    .scoreboard-score {
        font-size: 1rem;
    }
    
    .rank-badge,
    .scoreboard-rank {
        font-size: 1rem;
    }
}

@media (max-width: 480px) {
    .scoreboard-header,
    .scoreboard-row {
        grid-template-columns: 40px 1fr 60px;
        padding: 10px 12px;
    }
}

/* ========== TEAMS GRID MOBILE ========== */
@media (max-width: 768px) {
    .teams-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .team-card {
        padding: 20px;
    }
    
    .team-avatar {
        width: 50px;
        height: 50px;
        font-size: 1.3rem;
    }
    
    .team-name {
        font-size: 1.1rem;
    }
    
    .team-stats {
        gap: 15px;
        flex-wrap: wrap;
        justify-content: space-around;
    }
}

/* ========== PROFILE MOBILE ========== */
@media (max-width: 768px) {
    .profile-header,
    .profile-header-enhanced {
        flex-direction: column;
        text-align: center;
        gap: 20px;
        padding: 25px;
    }
    
    .profile-avatar,
    .profile-avatar-enhanced {
        width: 90px;
        height: 90px;
        font-size: 2.2rem;
    }
    
    .profile-info h2,
    .profile-info-enhanced h1 {
        font-size: 1.5rem;
    }
    
    .profile-stats {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }
    
    .profile-stats-enhanced {
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
    }
    
    .profile-stat-card {
        padding: 18px;
    }
    
    .profile-stat-value {
        font-size: 1.5rem;
    }
}

@media (max-width: 480px) {
    .profile-stats {
        grid-template-columns: 1fr;
    }
}

/* ========== FORMS MOBILE ========== */
@media (max-width: 768px) {
    .form-group {
        margin-bottom: 16px;
    }
    
    .form-input,
    .form-textarea,
    select.form-input {
        padding: 14px 16px;
        font-size: 16px; /* Prevents zoom on iOS */
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    
    .form-actions {
        margin-top: 24px;
    }
    
    .form-actions .btn {
        width: 100%;
    }
}

/* ========== BUTTONS MOBILE ========== */
@media (max-width: 768px) {
    .btn {
        padding: 12px 20px;
        font-size: 0.9rem;
    }
    
    .btn-lg {
        padding: 14px 24px;
        font-size: 1rem;
    }
    
    .btn-sm {
        padding: 8px 14px;
        font-size: 0.8rem;
    }
    
    .btn-block {
        display: flex;
        width: 100%;
        justify-content: center;
    }
}

/* ========== MODALS MOBILE ========== */
@media (max-width: 768px) {
    .modal-overlay {
        padding: 10px;
    }
    
    .modal,
    .modal-content {
        padding: 20px;
        max-height: calc(100vh - 20px);
        margin: auto;
        border-radius: var(--border-radius-lg);
    }
    
    .modal-lg {
        max-width: 100%;
    }
    
    .modal-header {
        flex-direction: row;
        margin-bottom: 16px;
    }
    
    .modal-title {
        font-size: 1.2rem;
    }
    
    .modal-close {
        font-size: 1.3rem;
    }
    
    .modal-content-enhanced {
        width: 95%;
        max-height: calc(100vh - 20px);
    }
    
    .modal-header-enhanced {
        padding: 18px;
    }
    
    .modal-body-enhanced {
        padding: 18px;
        max-height: 55vh;
    }
    
    .modal-footer-enhanced {
        padding: 18px;
        flex-direction: column;
    }
    
    .modal-footer-enhanced .btn {
        width: 100%;
    }
}

/* ========== TABLES MOBILE ========== */
@media (max-width: 768px) {
    table {
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    table th,
    table td {
        white-space: nowrap;
        padding: 10px 12px;
        font-size: 0.85rem;
    }
}

/* ========== FOOTER MOBILE ========== */
@media (max-width: 768px) {
    .footer {
        padding: 30px 0 15px;
        margin-top: 40px;
    }
    
    .footer-content {
        flex-direction: column;
        text-align: center;
        gap: 20px;
    }
    
    .footer-brand {
        order: 1;
    }
    
    .footer-links {
        order: 2;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .footer-bottom {
        font-size: 0.8rem;
        padding-top: 15px;
    }
}

/* ========== GRIDS MOBILE ========== */
@media (max-width: 768px) {
    .grid-2,
    .grid-3,
    .grid-4 {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 1024px) and (min-width: 769px) {
    .grid-3,
    .grid-4 {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ========== ALERTS MOBILE ========== */
@media (max-width: 768px) {
    .alert,
    .alert-enhanced {
        padding: 14px 16px;
        font-size: 0.9rem;
    }
    
    .alert-enhanced {
        gap: 12px;
    }
    
    .alert-icon {
        font-size: 1.2rem;
    }
}

/* ========== BADGES MOBILE ========== */
@media (max-width: 768px) {
    .badge {
        padding: 3px 10px;
        font-size: 0.7rem;
    }
}

/* ========== MAIN CONTENT MOBILE ========== */
@media (max-width: 768px) {
    .main-content {
        padding-top: 70px;
        min-height: calc(100vh - 150px);
    }
    
    .container {
        padding: 0 15px;
    }
}

/* ========== EMPTY STATE MOBILE ========== */
@media (max-width: 768px) {
    .empty-state {
        padding: 40px 15px;
    }
    
    .empty-icon {
        font-size: 3rem;
    }
    
    .empty-state h3 {
        font-size: 1.2rem;
    }
    
    .empty-state p {
        font-size: 0.9rem;
    }
}

/* ========== TOUCH OPTIMIZATIONS ========== */
@media (hover: none) and (pointer: coarse) {
    /* إزالة تأثيرات hover على الأجهزة اللمسية */
    .card:hover,
    .challenge-card:hover,
    .team-card:hover,
    .challenge-card-enhanced:hover {
        transform: none;
    }
    
    /* زيادة حجم العناصر القابلة للنقر */
    .btn,
    .nav-link,
    .filter-btn,
    .mobile-menu a {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* تحسين التفاعل على اللمس */
    .btn:active {
        transform: scale(0.98);
        opacity: 0.9;
    }
}

/* ========== LANDSCAPE MOBILE ========== */
@media (max-width: 768px) and (orientation: landscape) {
    .hero {
        padding: 30px 0;
    }
    
    .hero-title {
        font-size: 1.8rem;
    }
    
    .hero-stats {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .modal-overlay {
        padding: 10px;
    }
    
    .modal,
    .modal-content {
        max-height: calc(100vh - 20px);
    }
}

/* ========== SMALL MOBILE (320-375px) ========== */
@media (max-width: 375px) {
    .container {
        padding: 0 12px;
    }
    
    .logo {
        font-size: 1rem;
    }
    
    .logo-icon {
        font-size: 1.1rem;
    }
    
    .hero-title {
        font-size: 1.4rem;
    }
    
    .page-title {
        font-size: 1.4rem;
    }
    
    .card {
        padding: 15px;
    }
    
    .btn {
        padding: 10px 16px;
        font-size: 0.85rem;
    }
    
    .nav-controls {
        gap: 6px;
    }
    
    .theme-toggle {
        width: 32px;
        height: 32px;
    }
    
    .lang-toggle {
        padding: 5px 8px;
        font-size: 0.9rem;
    }
}

/* ========== SAFE AREA FOR NOTCHED DEVICES ========== */
@supports (padding: max(0px)) {
    .navbar {
        padding-top: max(12px, env(safe-area-inset-top));
        padding-left: max(20px, env(safe-area-inset-left));
        padding-right: max(20px, env(safe-area-inset-right));
    }
    
    .footer {
        padding-bottom: max(20px, env(safe-area-inset-bottom));
    }
    
    .mobile-menu {
        padding-left: max(15px, env(safe-area-inset-left));
        padding-right: max(15px, env(safe-area-inset-right));
    }
}

/* ========== PREVENT HORIZONTAL SCROLL ========== */
.container,
.main-content,
.hero,
.challenges-grid,
.teams-grid,
.scoreboard-enhanced {
    max-width: 100%;
    overflow-x: hidden;
}

/* ========== FIX FOR FIXED ELEMENTS ON MOBILE ========== */
@media (max-width: 768px) {
    body.menu-open {
        overflow: hidden;
        position: fixed;
        width: 100%;
    }
}

/* ========== IMPROVED READABILITY ON MOBILE ========== */
@media (max-width: 768px) {
    body {
        font-size: 15px;
        line-height: 1.6;
    }
    
    p {
        line-height: 1.7;
    }
    
    h1 { font-size: 1.75rem; }
    h2 { font-size: 1.5rem; }
    h3 { font-size: 1.25rem; }
    h4 { font-size: 1.1rem; }
}
